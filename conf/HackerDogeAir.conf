# HackerDogeAir configuration

bind		127.0.0.1 8888
load		./HackerDogeAir.so init

tls_dhparam	dh2048.pem

validator   v_email     regex ^([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}){,254}$
validator   v_password  regex ^[a-zA-Z0-9._%+-@#$^&*()]{8,32}$
validator   v_id        regex ^[0-9]{1,12}$
validator   v_date      regex ^[0-9]{2}-[0-9]{2}-[0-9]{4}$

domain * {
	certfile	cert/server.pem
	certkey		cert/key.pem

	static		/          		    home
	static  	/login      		login
    static      /register           register_user

    static      /flight/search       flight_search

    static      /user               user
    static      /user/detail        user_detail
    static      /user/bookings      user_bookings

    static      /css/style.css      asset_serve_style_css

    static		/images/froggo.gif  asset_serve_froggo_gif
	static		/images/island.jpg	asset_serve_island_jpg
	static		/images/logo.jpg	asset_serve_logo_jpg

    params post /login {
        validate    email       v_email
        validate    password    v_password
    }

    params post /register {
        validate    email       v_email
        validate    password    v_password
    }

    params qs:get /user/detail {
        validate    id  v_id
    }

    params post /flight/search {
        validate    arrivaldate v_date
    }
}
